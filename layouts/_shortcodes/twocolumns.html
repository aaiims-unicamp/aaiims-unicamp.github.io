{{- $content := split .Inner "<!--right-->" -}}
{{- $left := replaceRE "<!--left-->" "" (index $content 0) | markdownify -}}

{{- $links := findRE "\\[([^\\]]+)\\]\\(([^)]+)\\)" (index $content 0) -}}
<div style="display: flex; gap: 2em; align-items: flex-start;">
  <div style="flex: 0 0 250px; max-width: 250px;">
    {{ $left }}
  </div>
  <div style="flex: 1;">
    <div style="display: flex; flex-wrap: wrap; gap: 1em;">
      {{- range $links -}}
        {{- $title := replaceRE "\\[([^\\]]+)\\]\\(([^)]+)\\)" "$1" . -}}
        {{- $url := replaceRE "\\[([^\\]]+)\\]\\(([^)]+)\\)" "$2" . -}}
        {{- $page := site.GetPage $url -}}
        {{- if $page -}}
          {{- $img := $page.Params.featured_image | default "./static/img/cover.jpg" -}}
          <div style="width:120px;text-align:center;">
            <a href="{{ $page.RelPermalink }}">
              <img src="{{ $img }}" alt="{{ $title }}" style="width:100px;height:100px;object-fit:cover;border-radius:8px;">
              <div style="font-size:0.9em;">{{ $title }}</div>
            </a>
          </div>
        {{- end -}}
      {{- end -}}
    </div>
  </div>
</div>
